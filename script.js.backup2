// Mektup Ä°Ã§erikleri
const letters = {
    1: {
        title: "17 Haziran - Ä°lk GÃ¶rÃ¼ÅŸÃ¼mÃ¼z ğŸ’•",
        content: `
            <p>Hicran'Ä±m,</p>
            <p>17 Haziran 2024... Bu tarihi hiÃ§ unutmayacaÄŸÄ±m. Seni ilk gÃ¶rdÃ¼ÄŸÃ¼m o an, sanki zaman durdu. GÃ¶zlerin, gÃ¼lÃ¼ÅŸÃ¼n, varlÄ±ÄŸÄ±n... Her ÅŸey Ã§ok Ã¶zeldi. Kalbim ilk kez bÃ¶yle Ã§arpmÄ±ÅŸtÄ±. Ä°lk gÃ¶rÃ¼ÅŸte aÅŸk diye bir ÅŸey varmÄ±ÅŸ, sen bana bunu kanÄ±tladÄ±n.</p>
            <p>O gÃ¼nden beri her gÃ¼n seni daha Ã§ok seviyorum. Sen benim iÃ§in bir mucize gibisin. HayatÄ±ma girdiÄŸin andan itibaren her ÅŸey daha anlamlÄ±, daha gÃ¼zel, daha renkli oldu. Bir yola girdik o gÃ¼n, birlikte yÃ¼rÃ¼dÃ¼ÄŸÃ¼mÃ¼z bu yol bazen zor oldu ama her zaman gÃ¼zeldi.</p>
            <p>495 kilometre uzakta olsan da, kalbimde hep yanÄ±mdasÄ±n. Her nefesimde senin kokun, her gÃ¼lÃ¼ÅŸÃ¼mde senin sevgin var. Sen benim her ÅŸeyimsin.</p>
            <p class="highlight">17 Haziran bizim baÅŸlangÄ±cÄ±mÄ±z, seninle her gÃ¼n yeni bir baÅŸlangÄ±Ã§! â¤ï¸</p>
        `
    },
    2: {
        title: "Gece DÃ¼ÅŸÃ¼nceleri ğŸŒ™",
        content: `
            <p>CanÄ±m benim,</p>
            <p>Geceleri yatarken hep seni dÃ¼ÅŸÃ¼nÃ¼yorum. YanÄ±mda olmadÄ±ÄŸÄ±n her an, kalbim senin iÃ§in atÄ±yor. YÄ±ldÄ±zlara bakarken, acaba sen de aynÄ± yÄ±ldÄ±zlara mÄ± bakÄ±yorsun, acaba beni dÃ¼ÅŸÃ¼nÃ¼yor musun diye merak ediyorum.</p>
            <p>Trabzon'un soÄŸuk gecelerinde, senin sÄ±caklÄ±ÄŸÄ±nÄ± Ã¶zlÃ¼yorum. IÄŸdÄ±r'Ä±n gÃ¶kyÃ¼zÃ¼ altÄ±nda sen varsÄ±n, ben buradayÄ±m ama ruhlarÄ±mÄ±z hep bir arada. Mesafe sadece fiziksel, kalplerimiz hep birlikte atÄ±yor.</p>
            <p>Sesini duymak, gÃ¼lÃ¼ÅŸÃ¼nÃ¼ gÃ¶rmek, elini tutmak iÃ§in sabÄ±rsÄ±zlanÄ±yorum. Her telefon gÃ¶rÃ¼ÅŸmemiz, her mesajÄ±n benim iÃ§in bir hediye, bir mutluluk kaynaÄŸÄ±. Seninle konuÅŸtuÄŸumda dÃ¼nya durur, sadece biz kalÄ±rÄ±z.</p>
            <p class="highlight">UzaktayÄ±z ama kalpler yakÄ±n... Her zaman seninle! ğŸŒ™âœ¨</p>
        `
    },
    3: {
        title: "10 Temmuz - Senin Ã–zel GÃ¼nÃ¼n ğŸ‚",
        content: `
            <p>Sevgilim,</p>
            <p>10 Temmuz... Senin dÃ¼nyaya geldiÄŸin o muhteÅŸem gÃ¼n. DÃ¼nya senin doÄŸumunla daha gÃ¼zel oldu. Her 10 Temmuz'da, seni tanÄ±dÄ±ÄŸÄ±m iÃ§in ÅŸÃ¼krediyorum. DoÄŸum gÃ¼nÃ¼n benim iÃ§in bir bayram, Ã§Ã¼nkÃ¼ sen varsÄ±n diye kutluyorum.</p>
            <p>Temmuz gÃ¼neÅŸi gibi sÄ±caksÄ±n, temmuz yaÄŸmuru gibi ferahlatÄ±cÄ±sÄ±n. DoÄŸum gÃ¼nÃ¼n geldiÄŸinde, seni ne kadar Ã§ok sevdiÄŸimi bir kez daha hatÄ±rlatmak istiyorum. Sen benim en deÄŸerli hediyemsin, hayatÄ±ma kattÄ±ÄŸÄ±n renk paha biÃ§ilemez.</p>
            <p>Her yaÅŸ gÃ¼nÃ¼nde yanÄ±nda olmak istiyorum. Pasta keserken, mum Ã¼flerken, dilek tutarken yanÄ±nda olmak istiyorum. Ama ÅŸimdilik uzaktayÄ±z, yine de kalbim seninle her 10 Temmuz'da.</p>
            <p class="highlight">10 Temmuz benim iÃ§in de Ã¶zel, Ã§Ã¼nkÃ¼ sen varsÄ±n! ğŸ‰ğŸ’•</p>
        `
    },
    4: {
        title: "11 Ocak - Benim GÃ¼nÃ¼m â„ï¸",
        content: `
            <p>Hicran'Ä±m,</p>
            <p>11 Ocak'ta dÃ¼nyaya geldim, seni bulabilmek iÃ§in. OcaÄŸÄ±n soÄŸuÄŸunda doÄŸdum ama sen kalbimi Ä±sÄ±ttÄ±n. Her 11 Ocak'ta, seninle tanÄ±ÅŸtÄ±ÄŸÄ±m iÃ§in ne kadar ÅŸanslÄ± olduÄŸumu dÃ¼ÅŸÃ¼nÃ¼rÃ¼m. DoÄŸum gÃ¼nÃ¼m seninle Ã§ok daha anlamlÄ±.</p>
            <p>Sen 10 Temmuz, ben 11 Ocak... Ä°ki farklÄ± mevsim, iki farklÄ± gÃ¼n ama aynÄ± kalp. Senin sÄ±caklÄ±ÄŸÄ±n benim soÄŸukluÄŸumu eritiyor, benim sevgim senin gÃ¼nlerini aydÄ±nlatÄ±yor. Birbirimiz iÃ§in yaratÄ±lmÄ±ÅŸÄ±z sanki.</p>
            <p>DoÄŸum gÃ¼nlerimiz farklÄ± ama sevgimiz bir. Her gÃ¼n seninle kutlama gibi. Her an seninle Ã¶zel. Seni sevmek benim iÃ§in bir hediye, her gÃ¼nÃ¼mÃ¼ bayram yapan ÅŸey sensin.</p>
            <p class="highlight">Temmuz gÃ¼neÅŸi ve Ocak karÄ±... Biz birlikte mÃ¼kemmeliz! â„ï¸â˜€ï¸</p>
        `
    },
    5: {
        title: "Hayallerimiz ve GeleceÄŸimiz ğŸŒŸ",
        content: `
            <p>AÅŸkÄ±m,</p>
            <p>GeleceÄŸi seninle hayal ediyorum. KÃ¼Ã§Ã¼k bir evimiz olacak, bahÃ§esi olacak. SabahlarÄ± birlikte kahvaltÄ± yapacaÄŸÄ±z, Van kahvaltÄ±sÄ± mÄ± Trabzon hamsisi mi tartÄ±ÅŸacaÄŸÄ±z ama ikisini de seveceÄŸiz. Her sabah seninle uyanmak, her akÅŸam seninle uyumak...</p>
            <p>10 Temmuz'larda sana en gÃ¼zel hediyeleri alacaÄŸÄ±m, 11 Ocak'larda sen bana en gÃ¼zel sÃ¼rprizleri yapacaksÄ±n. Her 17 Haziran'da yÄ±l dÃ¶nÃ¼mÃ¼mÃ¼zÃ¼ kutlayacaÄŸÄ±z, o ilk gÃ¼nÃ¼ hatÄ±rlayacaÄŸÄ±z ve ne kadar yol kat ettiÄŸimize ÅŸaÅŸÄ±racaÄŸÄ±z.</p>
            <p>Koltukta film izlerken sarÄ±lmak, mutfakta birlikte yemek yapmak, hafta sonlarÄ± el ele gezmeye Ã§Ä±kmak... Bunlar benim hayallerim, bizim hayallerimiz. Hayallerimiz gerÃ§ek olacak, birlikte gÃ¼zel bir gelecek kuracaÄŸÄ±z.</p>
            <p class="highlight">Gelecek seninle Ã§ok gÃ¼zel olacak! Her gÃ¼n 17 Haziran gibi gÃ¼zel! ğŸ¡ğŸ’•</p>
        `
    }
};

let currentScreen = 'welcome-screen';

// ==================== EKRAN DEÄÄ°ÅTÄ°RME ====================
function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    
    const targetScreen = document.getElementById(screenId);
    if (targetScreen) {
        setTimeout(() => {
            targetScreen.classList.add('active');
        }, 100);
    }
    
    currentScreen = screenId;
}

// ==================== HEDÄ°YE KUTUSU ====================
const giftBoxWrapper = document.getElementById('gift-box-wrapper');

if (giftBoxWrapper) {
    giftBoxWrapper.addEventListener('click', function() {
        this.classList.add('opening');
        
        // Konfeti efekti
        createConfetti();
        
        // Ses efekti (opsiyonel)
        playOpenSound();
        
        setTimeout(() => {
            showScreen('our-story-screen');
        }, 1000);
    });
}

// ==================== BÄ°ZÄ°M HÄ°KAYEMÄ°Z - MEKTUPLARA GEÃ‡Ä°Å ====================
const continueToLettersBtn = document.getElementById('continue-to-letters');
if (continueToLettersBtn) {
    continueToLettersBtn.addEventListener('click', function() {
        showScreen('letter-select-screen');
    });
}

// ==================== MEKTUP SEÃ‡Ä°MÄ° ====================
document.querySelectorAll('.letter-card').forEach(card => {
    card.addEventListener('click', function() {
        const letterId = this.getAttribute('data-letter');
        if (letterId && letters[letterId]) {
            openLetter(letterId);
        }
    });
});

function openLetter(letterId) {
    const letter = letters[letterId];
    
    const titleElement = document.getElementById('letter-title');
    const contentElement = document.getElementById('letter-content');
    
    if (titleElement && contentElement) {
        titleElement.textContent = letter.title;
        contentElement.innerHTML = letter.content;
    }
    
    showScreen('letter-read-screen');
}

// ==================== MEKTUP OKUDUKTAN SONRA ====================
const continueBtn = document.getElementById('continue-journey');
if (continueBtn) {
    continueBtn.addEventListener('click', function() {
        showScreen('flight-screen');
        
        setTimeout(() => {
            startFlight();
        }, 800);
    });
}

// ==================== UÃ‡AK YOLCULUÄU ====================
function startFlight() {
    const airplane = document.getElementById('airplane');
    const flightRoute = document.getElementById('flight-route');
    const distanceCount = document.getElementById('distance-count');
    const flightStatus = document.querySelector('.flight-status');
    
    if (!airplane || !flightRoute || !distanceCount || !flightStatus) return;
    
    // AnimasyonlarÄ± baÅŸlat
    airplane.classList.add('flying');
    flightRoute.classList.add('animating');
    
    // Mesafe sayacÄ±
    let distance = 0;
    const targetDistance = 495;
    const duration = 4000; // 4 saniye
    const steps = 100;
    const increment = targetDistance / steps;
    const interval = duration / steps;
    
    flightStatus.textContent = 'KalkÄ±ÅŸ hazÄ±rlÄ±klarÄ±...';
    
    setTimeout(() => {
        flightStatus.textContent = 'UÃ§uÅŸ baÅŸladÄ±! ğŸ›«';
    }, 500);
    
    const counter = setInterval(() => {
        distance += increment;
        
        if (distance >= targetDistance) {
            distance = targetDistance;
            clearInterval(counter);
            
            setTimeout(() => {
                flightStatus.textContent = 'IÄŸdÄ±r\'a vardÄ±k! ğŸ›¬';
                
                setTimeout(() => {
                    showScreen('arrival-screen');
                }, 1500);
            }, 500);
        }
        
        distanceCount.textContent = Math.floor(distance);
        
        // Durum mesajlarÄ±nÄ± gÃ¼ncelle
        if (distance > 100 && distance < 150) {
            flightStatus.textContent = 'Karadeniz Ã¼zerindeyiz ğŸŒŠ';
        } else if (distance > 250 && distance < 300) {
            flightStatus.textContent = 'DoÄŸu Anadolu\'ya yaklaÅŸÄ±yoruz â›°ï¸';
        } else if (distance > 400 && distance < 450) {
            flightStatus.textContent = 'IÄŸdÄ±r gÃ¶rÃ¼nÃ¼yor! ğŸ¯';
        }
    }, interval);
}

// ==================== VARIÅ - KIZ KARAKTER ====================
const girlCharacter = document.getElementById('girl-character');
if (girlCharacter) {
    girlCharacter.addEventListener('click', function() {
        // Kalp animasyonu
        createHearts();
        
        // Ses efekti
        playHeartSound();
        
        // Karakter animasyonu
        this.style.transform = 'scale(1.2)';
        setTimeout(() => {
            this.style.transform = 'scale(1)';
        }, 300);
        
        setTimeout(() => {
            showScreen('final-message-screen');
        }, 1000);
    });
}

// ==================== YENÄ°DEN BAÅLA ====================
const restartBtn = document.getElementById('restart-journey');
if (restartBtn) {
    restartBtn.addEventListener('click', function() {
        // TÃ¼m animasyonlarÄ± sÄ±fÄ±rla
        resetAnimations();
        
        setTimeout(() => {
            showScreen('welcome-screen');
        }, 300);
    });
}

function resetAnimations() {
    const giftBoxWrapper = document.getElementById('gift-box-wrapper');
    const airplane = document.getElementById('airplane');
    const flightRoute = document.getElementById('flight-route');
    const distanceCount = document.getElementById('distance-count');
    const flightStatus = document.getElementById('flight-status');
    
    if (giftBoxWrapper) {
        giftBoxWrapper.classList.remove('opening');
    }
    
    if (airplane) {
        airplane.classList.remove('flying');
    }
    
    if (flightRoute) {
        flightRoute.classList.remove('animating');
    }
    
    if (distanceCount) {
        distanceCount.textContent = '0';
    }
    
    if (flightStatus) {
        flightStatus.textContent = 'HazÄ±rlanÄ±yor';
    }
}

// ==================== KONFETÄ° ANÄ°MASYONU ====================
function createConfetti() {
    const colors = ['#ff6b9d', '#c44569', '#ffa502', '#ffd700', '#ff4081', '#f50057'];
    const confettiCount = 100;
    
    for (let i = 0; i < confettiCount; i++) {
        setTimeout(() => {
            const confetti = document.createElement('div');
            const size = Math.random() * 10 + 5;
            
            confetti.style.position = 'fixed';
            confetti.style.width = size + 'px';
            confetti.style.height = size + 'px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.left = Math.random() * window.innerWidth + 'px';
            confetti.style.top = '-20px';
            confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
            confetti.style.pointerEvents = 'none';
            confetti.style.zIndex = '9999';
            confetti.style.opacity = '1';
            confetti.style.transition = 'all 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                const randomX = (Math.random() - 0.5) * 300;
                const randomRotation = Math.random() * 720;
                
                confetti.style.top = window.innerHeight + 100 + 'px';
                confetti.style.left = (parseFloat(confetti.style.left) + randomX) + 'px';
                confetti.style.transform = `rotate(${randomRotation}deg)`;
                confetti.style.opacity = '0';
            }, 50);
            
            setTimeout(() => {
                confetti.remove();
            }, 3500);
        }, i * 15);
    }
}

// ==================== KALP ANÄ°MASYONU ====================
function createHearts() {
    const heartEmojis = ['â¤ï¸', 'ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜', 'ğŸ’“', 'ğŸ’'];
    const heartCount = 30;
    
    for (let i = 0; i < heartCount; i++) {
        setTimeout(() => {
            const heart = document.createElement('div');
            const size = Math.random() * 30 + 25;
            
            heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
            heart.style.position = 'fixed';
            heart.style.fontSize = size + 'px';
            heart.style.left = (Math.random() * window.innerWidth) + 'px';
            heart.style.top = window.innerHeight + 'px';
            heart.style.pointerEvents = 'none';
            heart.style.zIndex = '9999';
            heart.style.opacity = '1';
            heart.style.transition = 'all 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            
            document.body.appendChild(heart);
            
            setTimeout(() => {
                const randomX = (Math.random() - 0.5) * 200;
                const randomRotation = Math.random() * 360;
                
                heart.style.top = '-100px';
                heart.style.left = (parseFloat(heart.style.left) + randomX) + 'px';
                heart.style.transform = `rotate(${randomRotation}deg) scale(${Math.random() + 0.5})`;
                heart.style.opacity = '0';
            }, 50);
            
            setTimeout(() => {
                heart.remove();
            }, 3500);
        }, i * 80);
    }
}

// ==================== PARTÄ°KÃœL OLUÅTUR ====================
function createParticles() {
    const particlesBg = document.querySelectorAll('.particles-bg');
    
    particlesBg.forEach(container => {
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            const size = Math.random() * 4 + 1;
            
            particle.style.position = 'absolute';
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            particle.style.background = `rgba(255, ${Math.random() * 100 + 155}, ${Math.random() * 100 + 155}, ${Math.random() * 0.5 + 0.2})`;
            particle.style.borderRadius = '50%';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.pointerEvents = 'none';
            particle.style.animation = `float ${Math.random() * 10 + 10}s linear infinite`;
            particle.style.animationDelay = Math.random() * 5 + 's';
            
            container.appendChild(particle);
        }
    });
}

// Float animasyonu iÃ§in CSS ekle
const style = document.createElement('style');
style.textContent = `
    @keyframes float {
        0% {
            transform: translateY(0) translateX(0);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        90% {
            opacity: 1;
        }
        100% {
            transform: translateY(-100vh) translateX(${Math.random() * 100 - 50}px);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);

// ==================== SES EFEKTLERÄ° (Opsiyonel) ====================
function playOpenSound() {
    // GerÃ§ek ses dosyasÄ± eklenebilir
    console.log('ğŸ Hediye kutusu aÃ§Ä±ldÄ±!');
}

function playHeartSound() {
    // GerÃ§ek ses dosyasÄ± eklenebilir
    console.log('ğŸ’• Kalp sesi Ã§aldÄ±!');
}

// ==================== MOBÄ°L DOKUNMA ====================
document.addEventListener('touchstart', function() {}, {passive: true});

// Ã‡ift dokunma zoom engelleme
let lastTouchEnd = 0;
document.addEventListener('touchend', (e) => {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
        e.preventDefault();
    }
    lastTouchEnd = now;
}, false);

// ==================== KLAVYE KISA YOLLARI ====================
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const giftBoxWrapper = document.getElementById('gift-box-wrapper');
        if (giftBoxWrapper) {
            giftBoxWrapper.classList.remove('opening');
        }
        showScreen('welcome-screen');
    }
});

// ==================== SAYFA YÃœKLENDÄ°ÄÄ°NDE ====================
window.addEventListener('load', () => {
    // PartikÃ¼lleri oluÅŸtur
    createParticles();
    
    // BaÅŸlangÄ±Ã§ animasyonlarÄ±
    setTimeout(() => {
        const fadeElements = document.querySelectorAll('.fade-in, .fade-in-delay, .fade-in-delay-2');
        fadeElements.forEach(el => {
            el.style.opacity = '1';
        });
    }, 200);
    
    // HoÅŸ geldin mesajÄ±
    console.log('%cğŸ’• Hicran iÃ§in Ã¶zel site hazÄ±r! ğŸ’•', 'color: #ff6b9d; font-size: 20px; font-weight: bold;');
    console.log('%câœ¨ Trabzon\'dan IÄŸdÄ±r\'a sevgiyle... âœ¨', 'color: #ffa502; font-size: 14px;');
});

// ==================== WINDOW RESIZE ====================
window.addEventListener('resize', () => {
    // Responsive ayarlamalar otomatik CSS ile yapÄ±lÄ±yor
});

// ==================== ERROR HANDLING ====================
window.addEventListener('error', (e) => {
    console.error('Bir hata oluÅŸtu:', e.message);
});

// ==================== PERFORMANCE ====================
// Lazy loading iÃ§in intersection observer
const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// TÃ¼m letter cardlarÄ± gÃ¶zlemle
document.querySelectorAll('.letter-card').forEach(card => {
    observer.observe(card);
});

console.log('ğŸš€ Site baÅŸarÄ±yla yÃ¼klendi!');